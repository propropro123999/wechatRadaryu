<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ•æ„Ÿè¯æ£€æµ‹å·¥å…· - å†…å®¹åˆè§„æ£€æŸ¥</title>

  <link rel="stylesheet" href="design-system-modern.css" />
  <link rel="stylesheet" href="tool-pages-interactions.css" />

  <style>
    /* ===== é¡µé¢ç‰¹å®šæ ·å¼ ===== */
    body {
      background: linear-gradient(135deg, #f8f9fa 0%, #f0f4f8 100%);
      min-height: 100vh;
    }

    /* ===== å¯¼èˆªæ  ===== */
    .navbar {
      position: sticky;
      top: 0;
      background: var(--color-bg-primary);
      border-bottom: 1px solid var(--color-border-light);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      z-index: 100;
      padding: var(--space-lg) var(--space-2xl);
    }

    .navbar-container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar-title {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-bold);
      color: var(--color-text-primary);
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .navbar-icon {
      font-size: 28px;
    }

    .navbar-badges {
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
    }

    .badge {
      background: var(--color-primary-bg);
      color: var(--color-primary);
      padding: var(--space-xs) var(--space-md);
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      font-weight: var(--font-weight-semibold);
      border: 1px solid var(--color-primary-light);
    }

    /* è¿”å›æŒ‰é’® */
    .navbar-home {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-lg);
      background: var(--color-bg-secondary);
      color: var(--color-text-primary);
      border-radius: var(--radius-lg);
      font-size: var(--text-sm);
      font-weight: var(--font-weight-semibold);
      cursor: pointer;
      text-decoration: none;
      transition: all var(--transition-base);
      border: 1px solid var(--color-border-light);
    }

    .navbar-home:hover {
      background: var(--color-primary);
      color: white;
      border-color: var(--color-primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    /* ===== ä¸»å®¹å™¨ ===== */
    .main-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: var(--space-3xl) var(--space-lg);
    }

    /* ===== ä»‹ç»å¡ç‰‡ ===== */
    .intro-card {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
      color: white;
      padding: var(--space-3xl);
      border-radius: var(--radius-xl);
      margin-bottom: var(--space-3xl);
      box-shadow: 0 12px 32px rgba(59, 130, 246, 0.2);
    }

    .intro-title {
      font-size: var(--text-3xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-md);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .intro-desc {
      font-size: var(--text-lg);
      opacity: 0.95;
      line-height: 1.6;
    }

    /* ===== å†…å®¹ç½‘æ ¼ ===== */
    .content-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-2xl);
    }

    /* ===== å¡ç‰‡ ===== */
    .card {
      background: var(--color-bg-primary);
      border: 1px solid var(--color-border-light);
      border-radius: var(--radius-lg);
      padding: var(--space-2xl);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      transition: all var(--transition-base);
    }

    .card:hover {
      border-color: var(--color-primary);
      box-shadow: 0 8px 16px rgba(59, 130, 246, 0.12);
    }

    .card-title {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-2xl);
      color: var(--color-text-primary);
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .card-icon {
      font-size: 28px;
    }

    /* ===== è¡¨å•å…ƒç´  ===== */
    .form-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      margin-bottom: var(--space-lg);
    }

    .form-label {
      font-size: var(--text-sm);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
    }

    .textarea {
      width: 100%;
      min-height: 150px;
      padding: var(--space-lg);
      border: 1px solid var(--color-border-light);
      border-radius: var(--radius-lg);
      font-family: var(--font-family-base);
      font-size: var(--text-base);
      color: var(--color-text-primary);
      background: var(--color-bg-secondary);
      transition: all var(--transition-base);
      resize: vertical;
    }

    .textarea:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      background: var(--color-bg-primary);
    }

    /* ===== æŒ‰é’® ===== */
    .btn {
      padding: var(--space-md) var(--space-2xl);
      border: none;
      border-radius: var(--radius-lg);
      font-size: var(--text-base);
      font-weight: var(--font-weight-semibold);
      cursor: pointer;
      transition: all var(--transition-base);
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
      color: white;
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.2);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(59, 130, 246, 0.3);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--color-bg-secondary);
      color: var(--color-text-primary);
      border: 1px solid var(--color-border-light);
    }

    .btn-secondary:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* ===== ç»“æœæ˜¾ç¤º ===== */
    .result-box {
      background: var(--color-bg-secondary);
      border: 1px solid var(--color-border-light);
      border-radius: var(--radius-lg);
      padding: var(--space-2xl);
      margin-top: var(--space-lg);
      display: none;
    }

    .result-box.show {
      display: block;
      animation: slideIn 0.3s ease-in-out;
    }

    .result-status {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
      padding: var(--space-lg);
      border-radius: var(--radius-lg);
      font-weight: var(--font-weight-semibold);
    }

    .result-status.safe {
      background: var(--color-success-light);
      color: var(--color-success);
      border: 1px solid var(--color-success);
    }

    .result-status.unsafe {
      background: var(--color-error-light);
      color: var(--color-error);
      border: 1px solid var(--color-error);
    }

    .result-status.warning {
      background: var(--color-warning-light);
      color: var(--color-warning);
      border: 1px solid var(--color-warning);
    }

    .result-icon {
      font-size: 20px;
    }

    .result-content {
      margin-bottom: var(--space-lg);
    }

    .result-item {
      background: var(--color-bg-primary);
      border-left: 3px solid var(--color-primary);
      padding: var(--space-md) var(--space-lg);
      margin-bottom: var(--space-md);
      border-radius: var(--radius-md);
    }

    .result-word {
      display: inline-block;
      background: var(--color-error-light);
      color: var(--color-error);
      padding: var(--space-xs) var(--space-md);
      border-radius: var(--radius-sm);
      font-weight: var(--font-weight-semibold);
      margin: 0 var(--space-xs);
    }

    .result-detail {
      font-size: var(--text-sm);
      color: var(--color-text-secondary);
      margin-top: var(--space-sm);
    }

    /* ===== æ“ä½œæŒ‰é’®ç»„ ===== */
    .action-group {
      display: flex;
      gap: var(--space-lg);
      flex-wrap: wrap;
      margin-bottom: var(--space-lg);
    }

    /* ===== åŠ è½½çŠ¶æ€ ===== */
    .loading {
      display: inline-flex;
      align-items: center;
      gap: var(--space-md);
    }

    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(59, 130, 246, 0.2);
      border-top-color: var(--color-primary);
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ===== æˆæƒå±‚æ ·å¼ ===== */
    #auth-screen {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.92);
      z-index: 9999;
      backdrop-filter: blur(8px);
    }
    .auth-card {
      width: 360px;
      max-width: 90vw;
      padding: 24px;
      border-radius: 16px;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      box-shadow: 0 16px 48px rgba(15, 23, 42, 0.12);
    }
    .auth-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
      color: #0f172a;
    }
    .auth-subtitle {
      font-size: 12px;
      color: #475569;
      margin-bottom: 16px;
    }
    .auth-label {
      font-size: 12px;
      color: #475569;
      margin-bottom: 6px;
      display: block;
      font-weight: 600;
    }
    .auth-input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      background: #f8fafc;
      color: #0f172a;
      outline: none;
      font-size: 13px;
      margin-bottom: 14px;
      box-sizing: border-box;
      transition: border-color 0.18s, box-shadow 0.18s, transform 0.12s ease;
    }
    .auth-input:focus {
      border-color: #bfdbfe;
      box-shadow: 0 0 0 3px rgba(191, 219, 254, 0.55);
      transform: translateY(-1px);
    }
    .auth-btn {
      width: 100%;
      border: none;
      border-radius: 10px;
      padding: 11px 16px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.25);
      transition: transform 0.18s ease, box-shadow 0.18s ease, filter 0.18s ease;
    }
    .auth-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 36px rgba(37, 99, 235, 0.32);
      filter: brightness(1.02);
    }
    .auth-error {
      margin-top: 10px;
      font-size: 11px;
      color: #dc2626;
      min-height: 16px;
    }
    .auth-card.shake {
      animation: shake 0.3s ease-in-out;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-3px); }
    }
    #app { display: none; }

    /* ===== å“åº”å¼ ===== */
    @media (max-width: 768px) {
      .navbar-container {
        flex-wrap: wrap;
        gap: var(--space-lg);
      }

      .navbar-title {
        font-size: var(--text-xl);
      }

      .main-container {
        padding: var(--space-2xl) var(--space-md);
      }

      .intro-card {
        padding: var(--space-2xl);
      }

      .intro-title {
        font-size: var(--text-2xl);
      }

      .textarea {
        min-height: 120px;
      }
    }
  </style>
</head>
<body>
  <!-- æˆæƒå±‚ -->
  <div id="auth-screen">
    <div class="auth-card" id="auth-card">
      <div class="auth-title">ğŸ” è®¿é—®æˆæƒ</div>
      <div class="auth-subtitle">è¯·è¾“å…¥å¯†ç è®¿é—®æœ¬å·¥å…·</div>

      <label class="auth-label" for="auth-code">å¯†ç </label>
      <input
        id="auth-code"
        class="auth-input"
        type="password"
        placeholder="è¯·è¾“å…¥å¯†ç "
        autocomplete="off"
      />

      <button class="auth-btn" id="auth-btn">ç¡®è®¤è¿›å…¥</button>

      <div class="auth-error" id="auth-error"></div>
    </div>
  </div>

  <!-- çœŸæ­£çš„åº”ç”¨ -->
  <div id="app">
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="navbar-container">
      <div class="navbar-title">
        <span class="navbar-icon">ğŸ”</span>
        <span>æ•æ„Ÿè¯æ£€æµ‹å·¥å…·</span>
      </div>
      <div style="display: flex; align-items: center; gap: var(--space-lg);">
        <div class="navbar-badges">
          <div class="badge">âœ“ å®æ—¶æ£€æµ‹</div>
          <div class="badge">âœ“ äº‘ç«¯å¤„ç†</div>
          <div class="badge">âœ“ éšç§ä¿æŠ¤</div>
        </div>
        <a href="index-modern.html" class="navbar-home">â† è¿”å›é¦–é¡µ</a>
      </div>
    </div>
  </nav>

  <!-- ä¸»å®¹å™¨ -->
  <div class="main-container">
    <!-- ä»‹ç»å¡ç‰‡ -->
    <div class="intro-card">
      <div class="intro-title">ğŸš€ æ™ºèƒ½å†…å®¹åˆè§„æ£€æŸ¥</div>
      <div class="intro-desc">
        ä½¿ç”¨å…ˆè¿›çš„æ•æ„Ÿè¯æ£€æµ‹ç®—æ³•ï¼Œå®æ—¶è¯†åˆ«æ–‡æœ¬ä¸­çš„æ•æ„Ÿè¯ã€ä¸å½“ç”¨è¯­ç­‰å†…å®¹ï¼Œå¸®åŠ©ç¡®ä¿å†…å®¹çš„åˆè§„æ€§ã€‚æ”¯æŒå¤šç§æ£€æµ‹æ¨¡å¼å’Œå¤„ç†æ–¹å¼ã€‚
      </div>
    </div>

    <!-- å†…å®¹ç½‘æ ¼ -->
    <div class="content-grid">
      <!-- æ£€æµ‹å·¥å…·å¡ç‰‡ -->
      <div class="card">
        <div class="card-title">
          <span class="card-icon">ğŸ“</span>
          æ–‡æœ¬æ£€æµ‹
        </div>

        <div class="form-group">
          <label class="form-label" for="inputText">è¾“å…¥è¦æ£€æµ‹çš„æ–‡æœ¬</label>
          <textarea
            id="inputText"
            class="textarea"
            placeholder="ç²˜è´´æˆ–è¾“å…¥ä½ è¦æ£€æµ‹çš„æ–‡æœ¬å†…å®¹..."></textarea>
        </div>

        <div class="action-group">
          <button class="btn btn-primary" onclick="detectContains()">
            <span>ğŸ” æ£€æŸ¥æ•æ„Ÿè¯</span>
          </button>
          <button class="btn btn-secondary" onclick="detectAll()">
            <span>ğŸ“Š æŸ¥æ‰¾å…¨éƒ¨</span>
          </button>
          <button class="btn btn-secondary" onclick="replaceWords()">
            <span>ğŸ›¡ï¸ æ›¿æ¢æ•æ„Ÿè¯</span>
          </button>
          <button class="btn btn-secondary" onclick="clearInput()">
            <span>ğŸ—‘ï¸ æ¸…ç©º</span>
          </button>
        </div>

        <!-- ç»“æœå±•ç¤º -->
        <div id="resultBox" class="result-box">
          <div id="resultStatus" class="result-status"></div>
          <div id="resultContent" class="result-content"></div>
        </div>
      </div>

      <!-- æ›¿æ¢é…ç½®å¡ç‰‡ -->
      <div class="card">
        <div class="card-title">
          <span class="card-icon">âš™ï¸</span>
          æ›¿æ¢é…ç½®
        </div>

        <div class="form-group">
          <label class="form-label" for="replacementChar">æ›¿æ¢å­—ç¬¦</label>
          <input
            type="text"
            id="replacementChar"
            class="textarea"
            value="*"
            style="min-height: 40px; height: 40px;"
            placeholder="è¾“å…¥ç”¨æ¥æ›¿æ¢æ•æ„Ÿè¯çš„å­—ç¬¦ï¼Œé»˜è®¤ä¸º *"
          />
          <div class="result-detail">æç¤ºï¼šå¯ä»¥ç”¨ * æˆ–å…¶ä»–å­—ç¬¦æ›¿æ¢æ•æ„Ÿè¯ï¼Œæ•æ„Ÿè¯é•¿åº¦å¯¹åº”æ›¿æ¢çš„å­—ç¬¦æ•°</div>
        </div>

        <div class="form-group">
          <label class="form-label">æ£€æµ‹é€‰é¡¹</label>
          <div style="display: flex; gap: var(--space-md); flex-wrap: wrap;">
            <label style="display: flex; align-items: center; gap: var(--space-sm); cursor: pointer;">
              <input type="checkbox" id="caseSensitive" />
              åŒºåˆ†å¤§å°å†™
            </label>
            <label style="display: flex; align-items: center; gap: var(--space-sm); cursor: pointer;">
              <input type="checkbox" id="fuzzyMatch" />
              æ¨¡ç³ŠåŒ¹é…
            </label>
          </div>
        </div>
      </div>

      <!-- è¯´æ˜å¡ç‰‡ -->
      <div class="card">
        <div class="card-title">
          <span class="card-icon">â„¹ï¸</span>
          ä½¿ç”¨è¯´æ˜
        </div>

        <div style="font-size: var(--text-sm); color: var(--color-text-secondary); line-height: 1.8;">
          <p><strong>ğŸ” æ£€æŸ¥æ•æ„Ÿè¯</strong><br>å¿«é€Ÿæ£€æŸ¥æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«ä»»ä½•æ•æ„Ÿè¯</p>

          <p style="margin-top: var(--space-lg);"><strong>ğŸ“Š æŸ¥æ‰¾å…¨éƒ¨</strong><br>æ˜¾ç¤ºæ–‡æœ¬ä¸­æ‰€æœ‰æ•æ„Ÿè¯çš„ä½ç½®å’Œè¯¦ç»†ä¿¡æ¯</p>

          <p style="margin-top: var(--space-lg);"><strong>ğŸ›¡ï¸ æ›¿æ¢æ•æ„Ÿè¯</strong><br>å°†æ•æ„Ÿè¯æ›¿æ¢ä¸ºæŒ‡å®šå­—ç¬¦ï¼Œé€‚ç”¨äºå†…å®¹è¿‡æ»¤</p>

          <p style="margin-top: var(--space-lg);"><strong>âš™ï¸ æ£€æµ‹é…ç½®</strong><br>è‡ªå®šä¹‰æ›¿æ¢å­—ç¬¦å’Œæ£€æµ‹é€‰é¡¹ï¼Œå¢å¼ºæ£€æµ‹æ•ˆæœ</p>

          <p style="margin-top: var(--space-lg); padding-top: var(--space-lg); border-top: 1px solid var(--color-border-light);"><strong>éšç§è¯´æ˜</strong><br>æ–‡æœ¬æ•°æ®ä»…åœ¨äº‘ç«¯å¤„ç†ï¼Œä¸ä¼šè¢«ä¿å­˜æˆ–ç”¨äºå…¶ä»–ç›®çš„</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_URL = '/api/detect';

    /**
     * å‘é€æ£€æµ‹è¯·æ±‚
     */
    async function sendDetectRequest(action, text, options = {}) {
      const btn = event.target;
      const originalText = btn.textContent;

      try {
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner"></span> å¤„ç†ä¸­...';

        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            action,
            text,
            ...options
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const result = await response.json();
        displayResult(action, result);

      } catch (error) {
        console.error('æ£€æµ‹é”™è¯¯:', error);
        showError('æ£€æµ‹å¤±è´¥: ' + error.message);
      } finally {
        btn.disabled = false;
        btn.innerHTML = originalText;
      }
    }

    /**
     * æ˜¾ç¤ºæ£€æµ‹ç»“æœ
     */
    function displayResult(action, result) {
      const resultBox = document.getElementById('resultBox');
      const resultStatus = document.getElementById('resultStatus');
      const resultContent = document.getElementById('resultContent');

      resultBox.classList.add('show');

      if (action === 'contains') {
        const hasSensitive = result.hasSensitive;
        resultStatus.className = `result-status ${hasSensitive ? 'unsafe' : 'safe'}`;
        resultStatus.innerHTML = hasSensitive
          ? '<span class="result-icon">âš ï¸</span> æ£€æµ‹åˆ°æ•æ„Ÿè¯'
          : '<span class="result-icon">âœ…</span> å†…å®¹å®‰å…¨';
        resultContent.innerHTML = '<p>æ–‡æœ¬å·²æ£€æŸ¥å®Œæˆã€‚</p>';

      } else if (action === 'findAll') {
        const matches = result.matches || [];
        resultStatus.className = matches.length > 0 ? 'result-status unsafe' : 'result-status safe';
        resultStatus.innerHTML = matches.length > 0
          ? `<span class="result-icon">âš ï¸</span> æ‰¾åˆ° ${matches.length} ä¸ªæ•æ„Ÿè¯`
          : '<span class="result-icon">âœ…</span> æœªæ‰¾åˆ°æ•æ„Ÿè¯';

        if (matches.length > 0) {
          resultContent.innerHTML = matches.map((match, i) => `
            <div class="result-item">
              <div><strong>#${i + 1}</strong> <span class="result-word">${match.word}</span></div>
              <div class="result-detail">ä½ç½®: ${match.index} | é•¿åº¦: ${match.length}</div>
            </div>
          `).join('');
        } else {
          resultContent.innerHTML = '<p>æ–‡æœ¬ä¸­æœªå‘ç°æ•æ„Ÿè¯ã€‚</p>';
        }

      } else if (action === 'replace') {
        resultStatus.className = 'result-status warning';
        resultStatus.innerHTML = `<span class="result-icon">ğŸ›¡ï¸</span> å·²å¤„ç† ${result.matchCount} ä¸ªæ•æ„Ÿè¯`;
        resultContent.innerHTML = `
          <div style="margin-bottom: var(--space-lg);">
            <p><strong>åŸå§‹æ–‡æœ¬:</strong></p>
            <div style="background: var(--color-bg-primary); padding: var(--space-lg); border-radius: var(--radius-lg); word-break: break-all;">${result.originalText}</div>
          </div>
          <div>
            <p><strong>å¤„ç†åæ–‡æœ¬:</strong></p>
            <div style="background: var(--color-success-light); padding: var(--space-lg); border-radius: var(--radius-lg); word-break: break-all;">${result.replacedText}</div>
          </div>
        `;
      }
    }

    /**
     * æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
     */
    function showError(message) {
      const resultBox = document.getElementById('resultBox');
      const resultStatus = document.getElementById('resultStatus');
      const resultContent = document.getElementById('resultContent');

      resultBox.classList.add('show');
      resultStatus.className = 'result-status unsafe';
      resultStatus.innerHTML = `<span class="result-icon">âŒ</span> ${message}`;
      resultContent.innerHTML = '';
    }

    /**
     * æ£€æŸ¥æ–‡æœ¬ä¸­æ˜¯å¦åŒ…å«æ•æ„Ÿè¯
     */
    function detectContains() {
      const text = document.getElementById('inputText').value.trim();
      if (!text) {
        showError('è¯·è¾“å…¥è¦æ£€æµ‹çš„æ–‡æœ¬');
        return;
      }
      sendDetectRequest('contains', text);
    }

    /**
     * æŸ¥æ‰¾æ–‡æœ¬ä¸­çš„æ‰€æœ‰æ•æ„Ÿè¯
     */
    function detectAll() {
      const text = document.getElementById('inputText').value.trim();
      if (!text) {
        showError('è¯·è¾“å…¥è¦æ£€æµ‹çš„æ–‡æœ¬');
        return;
      }
      sendDetectRequest('findAll', text);
    }

    /**
     * æ›¿æ¢æ•æ„Ÿè¯
     */
    function replaceWords() {
      const text = document.getElementById('inputText').value.trim();
      const replacement = document.getElementById('replacementChar').value || '*';

      if (!text) {
        showError('è¯·è¾“å…¥è¦æ£€æµ‹çš„æ–‡æœ¬');
        return;
      }
      sendDetectRequest('replace', text, { replacement });
    }

    /**
     * æ¸…ç©ºè¾“å…¥
     */
    function clearInput() {
      document.getElementById('inputText').value = '';
      document.getElementById('replacementChar').value = '*';
      document.getElementById('resultBox').classList.remove('show');
    }
  </script>

  <script>
    const DEFAULT_PASSWORD = 'dcone2025';
    const authScreen = document.getElementById('auth-screen');
    const appRoot = document.getElementById('app');
    const input = document.getElementById('auth-code');
    const btn = document.getElementById('auth-btn');
    const errElAuth = document.getElementById('auth-error');
    const cardEl = document.getElementById('auth-card');

    function shakeCard() {
      cardEl.classList.remove('shake');
      void cardEl.offsetWidth;
      cardEl.classList.add('shake');
    }

    function handleAuth() {
      const code = (input.value || '').trim();
      if (!code) {
        errElAuth.textContent = 'è¯·è¾“å…¥å¯†ç ã€‚';
        shakeCard();
        return;
      }
      if (code !== DEFAULT_PASSWORD) {
        errElAuth.textContent = 'å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚';
        shakeCard();
        return;
      }
      authScreen.style.display = 'none';
      appRoot.style.display = 'block';
    }

    btn.addEventListener('click', handleAuth);
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') handleAuth();
    });

    window.addEventListener('load', function() {
      setTimeout(() => input.focus(), 80);
    });
  </script>
  </div>
</body>
</html>
